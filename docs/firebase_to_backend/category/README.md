# 카테고리 기능 백엔드 이관 문서

## 📋 목차

1. [개요](#개요)
2. [문서 구성](#문서-구성)
3. [우선순위](#우선순위)
4. [기술 스택 권장사항](#기술-스택-권장사항)

---

## 개요

이 문서는 SOI 앱의 **카테고리(Category)** 기능을 Firebase에서 Spring Boot 백엔드로 이관하기 위한 완전한 사양서입니다.

### 현재 구조 (Firebase)

- **프론트엔드**: Flutter에서 모든 비즈니스 로직 처리
- **데이터베이스**: Firestore (NoSQL)
- **스토리지**: Firebase Storage
- **인증**: Firebase Auth

### 목표 구조 (Spring Boot)

- **프론트엔드**: UI/UX와 상태 관리만
- **백엔드**: 모든 비즈니스 로직, 검증, 권한 관리
- **데이터베이스**: PostgreSQL (권장) 또는 MySQL
- **스토리지**: Firebase Storage 유지 또는 AWS S3
- **인증**: JWT 기반

---

## 📚 문서 구조

1. **[개요](./01-overview.md)** - 카테고리 기능 설명 및 시나리오
2. **[비즈니스 규칙](./02-business-rules.md)** - 검증 및 비즈니스 로직
3. **[API 엔드포인트](./03-api-endpoints.md)** - REST API 명세 (18개 엔드포인트)
4. **[데이터 모델](./04-data-models.md)** - Entity 및 DTO 설계
5. **[기능별 상세 명세](./05-features.md)** - 입력/처리/출력 프로세스

---

## 우선순위

### Phase 1: 핵심 기능 (1-2주)

1. **카테고리 CRUD**

   - 생성, 조회, 수정, 삭제
   - 사용자별 카테고리 목록 조회
   - 차단 사용자 필터링

2. **멤버 관리**
   - 멤버 추가 (기본)
   - 멤버 제거
   - 친구 관계 확인

### Phase 2: 초대 시스템 (1-2주)

3. **카테고리 초대**
   - 초대 생성
   - 초대 수락/거절
   - Pending 멤버 관리

### Phase 3: 부가 기능 (1주)

4. **사진 관리**

   - 사진 추가/삭제
   - 표지사진 관리
   - 차단 필터링

5. **상태 관리**
   - 고정/고정 해제
   - 커스텀 이름
   - 읽음 상태 관리

---

## 기술 스택 권장사항

### 백엔드

- **Framework**: Spring Boot 3.2+
- **언어**: Java 17+ 또는 Kotlin
- **데이터베이스**: PostgreSQL 15+ (권장)
- **ORM**: Spring Data JPA + QueryDSL
- **API 문서**: SpringDoc OpenAPI 3.0
- **인증**: Spring Security + JWT
- **스토리지**: Firebase Admin SDK 또는 AWS S3

### 데이터베이스

```sql
-- 주요 테이블
categories
category_members
category_invites
category_custom_names
category_pin_status
```

### API 설계 원칙

- RESTful 설계
- 명확한 HTTP 메서드 사용 (GET, POST, PUT, DELETE)
- 일관된 응답 형식
- 적절한 HTTP 상태 코드
- 페이지네이션 지원 (목록 조회)
- 필터링 및 정렬 지원

---

## 예상 개발 일정

| Phase    | 내용                  | 예상 기간 |
| -------- | --------------------- | --------- |
| Phase 1  | 핵심 CRUD + 멤버 관리 | 1-2주     |
| Phase 2  | 초대 시스템           | 1-2주     |
| Phase 3  | 사진 + 상태 관리      | 1주       |
| **총합** |                       | **3-5주** |

---

## 참고사항

### 현재 구현의 주요 특징

1. **실시간 업데이트**: Firestore Stream 사용 → REST API + Polling/FCM으로 대체
2. **배치 친구 확인**: 여러 사용자의 친구 관계를 한 번에 확인 (성능 최적화)
3. **차단 필터링**: 차단한 사용자가 포함된 카테고리 숨김 (1:1 카테고리)
4. **Pending 초대**: 멤버 간 상호 친구가 아닐 때 초대 대기 상태
5. **커스텀 이름**: 사용자별로 다른 카테고리 이름 표시
6. **고정 기능**: 사용자별 카테고리 고정 상태

### 성능 고려사항

- 친구 관계 확인은 배치로 처리 (N+1 문제 방지)
- 카테고리 목록 조회 시 JOIN으로 멤버 정보 함께 가져오기
- 적절한 인덱스 설계
- 캐싱 전략 (Redis 활용)

---

## 다음 단계

1. **[카테고리 개요](./01-overview.md)** 읽기
2. **[비즈니스 규칙](./02-business-rules.md)** 확인
3. **[API 엔드포인트](./03-api-endpoints.md)** 설계 검토
4. **[데이터 모델](./04-data-models.md)** 스키마 확인
5. 백엔드 개발 시작

---

## 문의사항

문서 내용에 대한 질문이나 추가 정보가 필요한 경우:

- Flutter 개발자와 협의
- 각 문서의 상세 내용 참조
- 예제 코드 및 시나리오 확인
